<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
    <script src="buffer_to_wav.js"></script>
    <script src="rave.js"></script>
    <title>RAVE.js - RAVE online timbre transfer</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="favicon.png" />
    <meta
      property="og:title"
      content="RAVE.js - online timbre transfer with RAVE"
    />
    <meta
      property="og:url"
      content="https://caillonantoine.github.io/ravejs/"
    />
    <meta
      property="og:image"
      content="https://caillonantoine.github.io/ravejs/rave_card.jpg?123"
    />
    <meta
      property="og:description"
      content="Online timbre transfer using RAVE: a Realtime Audio Variational autoEncoder. This application uses onnx.js to process audio files right in your browser!"
    />
    <meta property="og:type" content="website" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    <div class="content">
      <img src="rave_cropped.png" height="100px" flex-grow="7" />

      <div class="section">
        <h2>I - Audio source selection</h2>
        <input
          type="button"
          value="Load default sample"
          onclick="loadCantina();"
        />
        <div class="group">
          <input
            type="file"
            id="audio-file"
            accept="audio/mpeg, audio/ogg, audio/*"
          />
          <input type="button" value="Load" onclick="loadUploadedFile();" />
        </div>
        <input
          id="record-button"
          type="button"
          value="Record from microphone"
          onclick="toogleRecording();"
        />
      </div>

      <div class="section">
        <h2>II - Audio transfer</h2>
        Select model :
        <select name="Model" id="model">
          <option value="models/darbouka.onnx">Darbouka</option>
          <option value="models/dogs.onnx">Dogs</option>
          <option value="models/cats.onnx">Cats</option>
          <option value="models/jazz.onnx">Jazz</option>
          <option value="models/vctk.onnx">Speech</option>
        </select>

        <div class="flexRow">
          <input
            id="play_input"
            type="button"
            value="Play input"
            onclick="playInput();"
            disabled="true"
          />
          <input
            id="ravify_button"
            type="button"
            value="Transfer"
            onclick="transfer();"
            disabled="true"
          />
          <input
            id="play_output"
            type="button"
            value="Play output"
            onclick="playOutput();"
            disabled="true"
          />
        </div>
        <a id="download_link" href=""></a>
      </div>
      <p class="info">
        * We do not store any of your data, everything is processed locally on
        your computer !
      </p>
    </div>
  </body>
</html>
